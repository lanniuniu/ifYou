<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="../d3.js"></script>
</head>
<body>
<div class="control-group">
    <button onclick="countUp('100')">
        Start
    </button>
    <button onclick="reset()">
        Clear
    </button>
</div>
<script>
    /*
    d3.timer(function, [delay], [mark])
    会启动一个自定义的定时器函数，并且反复调用给定的函数，直到该函数返回true或者定时器停止为止
     */
    const body = d3.select('body')
    const countdown = body.append('div').append('input')
    countdown.attr('type', 'button')
    .attr('class', 'countdown')
    .attr('value', '0')
    const countUp = target => {
        const t = d3.timer(() => {
            let value = countdown.attr('value')
            if (value === target) {
                t.stop()
                return
            }
            countdown.attr('value', ++value)
        })
    }
    const reset = () => countdown.attr('value', '0')
</script>
</body>
</html>
